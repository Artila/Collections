### jQuery基础——DOM篇

###2 DOM节点的创建

#### 2-1 通过JavaScript原生接口创建节点

先介绍下需要用到的浏览器提供的一些原生的方法（这里不处理低版本的IE兼容问题）

创建流程比较简单，大体如下：

1. 创建节点(常见的：元素、属性和文本)
2. 添加节点的一些属性
3. 加入到文档中

流程中涉及的一点方法：

- 创建元素：document.createElement
- 设置属性：setAttribute
- 添加文本：innerHTML
- 加入文档：appendChild

如右边代码所示，写一个最简单的元素创建，我们会发现几个问题：

1. 每一个元素节点都必须单独创建

2. 节点是属性需要单独设置，而且设置的接口不是很统一

3. 添加到指定的元素位置不灵活

4. 最后还有一个最重要的：浏览器兼容问题处理

   ​


#### 2-2 jQuery节点创建与属性的处理

**创建元素节点**：

可以有几种方式，后面会慢慢接触。常见的就是直接把这个节点的结构给通过HTML标记字符串描述出来，通过$()函数处理，$("html结构")

```
$("<div></div>")
```

**创建为本节点**：

与创建元素节点类似，可以直接把文本内容一并描述

```
$("<div>我是文本节点</div>")
```

**创建为属性节点**：

与创建元素节点同样的方式

```
$("<div id='test' class='aaron'>我是文本节点</div>")
```

这就是jQuery创建节点的方式，让我们保留HTML的结构书写方式，非常的简单、方便和灵活。



### 3 DOM节点的插入

#### 3-1 DOM内部插入append()与appendTo()

|        选择器        |            描述            |
| :---------------: | :----------------------: |
|  append（content）  |     向每个匹配的元素内部追加内容。      |
| appendTo（content） | 把所有匹配的元素追加到另一个指定的元素的集合中。 |

append：这个操作与对指定的元素执行原生的appendChild方法，将它们添加到文档中的情况类似。

appendTo：实际上，使用这个方法是颠倒了常规的$(A).append(B)的操作，即不是把B追加到A中，而是把A追加到B中。

简单的总结就是：

.append()和.appendTo()两种方法功能相同，主要的不同是语法——内容和目标的位置不同

```js
append()前面是被插入的对象，后面是要在对象内插入的元素内容
appendTo()前面是要插入的元素内容，而后面是被插入的对象
```



#### 3-2 DOM外部插入after()与before()

|       选择器        |                  描述                   |
| :--------------: | :-----------------------------------: |
| .after(content)  | 在匹配元素集合中的每个元素**后面**插入参数所指定的内容，作为其兄弟节点 |
| .before(content) |        据参数设定，在匹配元素的**前面**插入内容         |

- before与after都是用来对相对选中元素外部增加相邻的兄弟节点
- 2个方法都是都可以接收HTML字符串，DOM 元素，元素数组，或者jQuery对象，用来插入到集合中每个匹配元素的前面或者后面
- 2个方法都支持多个参数传递after(div1,div2,....) 

注意点：

- after向元素的后边添加html代码，如果元素后面有元素了，那将后面的元素后移，然后将html代码插入
- before向元素的前边添加html代码，如果元素前面有元素了，那将前面的元素前移，然后将html代码插入




#### 3-3 DOM内部插入prepend()与prependTo()

在元素内部进行操作的方法，除了在被选元素的结尾（仍然在内部）通过append与appendTo插入指定内容外，相应的还可以在被选元素之前插入，jQuery提供的方法是prepend与prependTo。

|    选择器    |           描述           |
| :-------: | :--------------------: |
|  prepend  |     向每个匹配的元素内部前置内容     |
| prependTo | 把所有匹配的元素前置到另一个指定的元素集合中 |

通过右边代码可以看到prepend与prependTo的使用及区别：

- .prepend()方法将指定元素插入到匹配元素里面作为它的第一个子元素 (如果要作为最后一个子元素插入用.append()).
- .prepend()和.prependTo()实现同样的功能，主要的不同是语法，插入的内容和目标的位置不同
- 对于.prepend() 而言，选择器表达式写在方法的前面，作为待插入内容的容器，将要被插入的内容作为方法的参数
- 而.prependTo() 正好相反，将要被插入的内容写在方法的前面，可以是选择器表达式或动态创建的标记，待插入内容的容器作为参数。

这里总结下内部操作四个方法的区别：

- append()向每个匹配的元素内部追加内容
- prepend()向每个匹配的元素内部前置内容
- appendTo()把所有匹配的元素追加到另一个指定元素的集合中
- prependTo()把所有匹配的元素前置到另一个指定的元素集合中




#### 3-4 DOM外部插入insertAfter()与insertBefore()

|     选择器      |         描述          |
| :----------: | :-----------------: |
| insertAfter  | 在目标元素前面插入集合中每个匹配的元素 |
| insertBefore | 在目标元素后面插入集合中每个匹配的元素 |

- .before()和.insertBefore()实现同样的功能。主要的区别是语法——内容和目标的位置。 对于before()选择表达式在函数前面，内容作为参数，而.insertBefore()刚好相反，内容在方法前面，它将被放在参数里元素的前面
- .after()和.insertAfter() 实现同样的功能。主要的不同是语法——特别是（插入）内容和目标的位置。 对于after()选择表达式在函数的前面，参数是将要插入的内容。对于 .insertAfter(), 刚好相反，内容在方法前面，它将被放在参数里元素的后面
- before、after与insertBefore。insertAfter的除了目标与位置的不同外，后面的不支持多参数处理

注意事项：

- insertAfter将JQuery封装好的元素插入到指定元素的后面，如果元素后面有元素了，那将后面的元素后移，然后将JQuery对象插入；
- insertBefore将JQuery封装好的元素插入到指定元素的前面，如果元素前面有元素了，那将前面的元素前移，然后将JQuery对象插入；




### 4 DOM节点的删除

#### 4-1 DOM节点删除之empty()的基本用法

empty 顾名思义，清空方法，但是与删除又有点不一样，因为它只移除了 指定元素中的所有子节点。

这个方法不仅移除子元素（和其他后代元素），同样移除元素里的文本。因为，根据说明，元素里任何文本字符串都被看做是该元素的子节点。请看下面的HTML：

```html
<div class="hello"><p>慕课网</p></div>
```

如果我们通过empty方法移除里面div的所有元素，它只是清空内部的html代码，但是标记仍然留在DOM中

```
//通过empty处理
$('.hello').empty()

//结果：<p>慕课网</p>被移除
<div class="hello"></div>
```

可以参考右边的代码区域：

```
通过empty移除了当前div元素下的所有p元素
但是本身id=test的div元素没有被删除
```



#### 4-2 DOM节点删除之remove()的有参用法和无参用法

remove与empty一样，都是移除元素的方法，但是remove会将元素自身移除，同时也会移除元素内部的一切，包括绑定的事件及与该元素相关的jQuery数据。

例如一段节点，绑定点击事件

```
<div class="hello"><p>慕课网</p></div>
$('.hello').on("click",fn)
```

如果不通过remove方法删除这个节点其实也很简单，但是同时需要把事件给销毁掉，这里是为了防止"内存泄漏"，所以前端开发者一定要注意，绑了多少事件，不用的时候一定要记得销毁

通过remove方法移除div及其内部所有元素，remove内部会自动操作事件销毁方法，所以使用使用起来非常简单

```
//通过remove处理
$('.hello').remove()
//结果：<div class="hello"><p>慕课网</p></div> 全部被移除
//节点不存在了,同事事件也会被销毁
```

**remove表达式参数：**

remove比empty好用的地方就是可以传递一个选择器表达式用来过滤将被移除的匹配元素集合，可以选择性的删除指定的节点

我们可以通过$()选择一组相同的元素，然后通过remove（）传递筛选的规则，从而这样处理

对比右边的代码区域，我们可以通过类似于这样处理

```
$("p").filter(":contains('3')").remove();
$("p").remove(":contains('3')");
$("p:contains('3')").remove();
结果一样。
```



####4-3 DOM节点删除之empty和remove区别

要用到移除指定元素的时候，jQuery提供了empty()与remove([expr])二个方法，两个都是删除元素，但是两者还是有区别。

**empty方法**

- 严格地讲，empty()方法并不是删除节点，而是清空节点，它能清空元素中的所有后代节点
- empty不能删除自己本身这个节点

**remove方法**

- 该节点与该节点所包含的所有后代节点将同时被删除
- 提供传递一个筛选的表达式，删除指定合集中的元素

以上就是二者的区别。



#### 4-4 DOM节点删除之保留数据的删除操作detach()



#### 4-5 



### 5 DOM节点的复制与替换

### 6 jQuery遍历

